<!DOCTYPE html>
<html>
<head>
    <title>Visor geográfico UNIGIS/COPANDES</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.79.0/dist/L.Control.Locate.min.css" />
    <style>
        body {
            padding: 0;
            margin: 0;
        }
        html, body, #map {
            height: 92%;
            width: 100%;
        }
        .footer {
            position: fixed;
            left: 0;
            bottom: 0;
            width: 100%;
            background-color: #FFF;
            color: #000;
            text-align: center;
            padding: 5px;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
        }
        .footer-top {
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
            margin-bottom: 5px;
        }
        .footer-bottom {
            font-size: 12px;
            color: #C0381B;
        }
        @media (max-width: 700px) {
            .container {
                width: 100%;
                margin: 0 auto;
            }
        }
    </style>
</head>
<body style="font-family:Verdana;color:#aaaaaa;">
    <div id='map'></div>
    <p id="demo"></p>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMT..." crossorigin=""></script>
    <script src="location.js" type="text/javascript"></script>
    <script src="grantescual.js" type="text/javascript"></script>
    <script src="perdida_bosquq_puerres.js" type="text/javascript"></script>
    <script src="globo3.js" type="text/javascript"></script>
    <script src="poligono4_uniondospoligonos.js" type="text/javascript"></script>

    <script>
        var map = L.map('map').setView([0.7682128, -77.24], 10);

        var arcgisWorldImageryLayer = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            attribution: 'Map data &copy; Esri'
        });

        var googleSatelliteLayer = L.tileLayer('https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}', {
            attribution: 'Map data &copy; Google'
        });

        var Calles = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png');

        var googleLayer = L.tileLayer('https://mt1.google.com/vt/lyrs=r&x={x}&y={y}&z={z}', {
            attribution: 'Map data &copy; Google'
        });

        function getColorStyle(feature) {
            return {
                weight: 4,
                color: '#7DDA58',
                opacity: 1,
                fillOpacity: 0,
                dashArray: '5, 5, 1, 5'
            };
        }

        function getColorStyle2(feature) {
            return {
                weight: 4,
                color: '#FF0000',
                opacity: 1,
                fillOpacity: 0,
                dashArray: '5, 5, 1, 5'
            };
        }

        function getColorStyle3(feature) {
            return {
                weight: 4,
                color: '#FD5238',
                opacity: 1,
                fillOpacity: 0,
                dashArray: '5, 5, 1, 5'
            };
        }
        
        function getColorStyle4(feature) {
            return {
                weight: 0.9,
                color: '#CECECE',
                opacity: 1,
                fillOpacity: 0,
                dashArray: '5, 5, 1, 5'
            };
        }

        var grantescual = new L.geoJson(grantescual, {
            style: getColorStyle
        });

        var Linea1 = new L.geoJson(perdida_bosquq_puerres, {
            style: getColorStyle2
        });

        var globo3 = new L.geoJson(globo3, {
            style: getColorStyle3
        }); 

        var poligono4_uniondospoligonos = new L.geoJson(poligono4_uniondospoligonos, {
            style: getColorStyle3
        });        

        $.ajax({
            url: 'https://www.googleapis.com/bigquery/v2/projects/sigeti/datasets/unidades_de_analisis/tables/comunidades_censo632?alt=json&access_token=[ACCESS_TOKEN]',
            dataType: 'json',
            success: function (data) {
                L.geoJSON(data).addTo(map);
            }
        });

        var overlayMaps = {
            "Ya adjudicados a Gran Tescual": grantescual,            
            "Ampliación Orito": globo3,
            "Ampliación zona intermedia": poligono4_uniondospoligonos,
            //"Pérdida de bosque - Puerres": Linea1
        };

        var baseMaps = {
            "Capa base ArcGIS": arcgisWorldImageryLayer,
            "Capa Base G. Satélite": googleSatelliteLayer,
            "Capa Base G. Calles": Calles,
            //"Capa Base G. General ": googleLayer
        };

        googleSatelliteLayer.addTo(map); // Añadir la capa de imagen del mundo como capa base por defecto
        globo3.addTo(map); // Añadir la capa "Globo 3" como capa superpuesta por defecto
        poligono4_uniondospoligonos.addTo(map);
		// grantescual.addTo(map);

        L.control.layers(baseMaps, overlayMaps, { collapsed: false }).addTo(map);

    </script>

    <div class="footer">
        <div class="footer-top">
		    <a href="https://plusacat-my.sharepoint.com/:f:/g/personal/antonio_pantoja_plus_ac_at/EqahzHnlBulGuZc9BDBs9GoBvjV5is366QhFrHG66I-f2w?e=SJ0CQB" target="_blank" rel="noreferrer noopener">Mapas PDF/imagen |</a>
		    <a href="https://plusacat-my.sharepoint.com/:f:/g/personal/antonio_pantoja_plus_ac_at/EqmJZNCgUApHvSaVJO6SPpsB4NLGmgJv3gKkNGxWnVjoiQ?e=QYIEGh" target="_blank" rel="noreferrer noopener">Capas vectoriales </a>
			
        </div>
        <div class="footer-bottom">
            © copyright: @AntonioPantojaC    -  antoniopantojac@gmail.com<br>
            <a href="https://twitter.com/AntonioPantojaC" target="_blank" rel="noreferrer noopener">Twitter   |</a>
            <a href="https://www.linkedin.com/in/antoniopantojac/" target="_blank" rel="noreferrer noopener">LinkedIn   |</a>
            <a href="https://americalatina.unigis.net/" target="_blank" rel="noreferrer noopener">UNIGIS América Latina   |</a>
            <a href="https://copandes.org/" target="_blank" rel="noreferrer noopener">COPANDES</a>
        </div>
    </div>
</body>
</html>
